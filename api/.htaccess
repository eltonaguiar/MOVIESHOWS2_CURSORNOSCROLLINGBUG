# MovieShows API - Apache Configuration

# Enable rewrite engine
RewriteEngine On

# Allow CORS preflight
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^(.*)$ $1 [R=204,L]

# Set CORS headers
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type, Authorization, X-User-Id, X-Requested-With"

# Disable directory listing
Options -Indexes

# Protect config file
<Files "config.php">
    Order Allow,Deny
    Deny from all
</Files>

# Set PHP settings for API
<IfModule mod_php.c>
    php_value max_execution_time 60
    php_value memory_limit 128M
    php_value post_max_size 10M
    php_flag display_errors Off
    php_flag log_errors On
</IfModule>

# Cache control
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType application/json "access plus 0 seconds"
</IfModule>

# Prevent caching of API responses
<IfModule mod_headers.c>
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
</IfModule>
